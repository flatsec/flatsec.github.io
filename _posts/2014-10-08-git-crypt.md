---
layout:     post
title:      Git Crypt
date:       2014-10-08 12:31:19
summary:    Use git-crypt to easily encrypt sensitive information in git repositories.
categories:
  - encryption

---

It's pretty easy to accidentally commit password files into git (believe me I know, because I've done it). It's possible to [remove a bad commit](https://help.github.com/articles/remove-sensitive-data/), but once that information leaks out, it has to be considered compromised.

<!-- more -->

[A few months ago](http://www.webmonkey.com/2013/01/users-scramble-as-github-search-exposes-passwords-security-details/):

>[github] temporarily shut down some parts of the site-wide search update it launched...the new search tools made it much easier to find passwords, private ssh keys and security tokens stored in GitHub repos.

The quote sort-of makes it sound like github did something to expose users sensitive information, but that's not the case. Rather the issue was that there was so much sensitive information already committed that when github improved their search capability it just became much easier to find it.

To avoid this situation, typically sensitive files are encrypted before they are committed into the source code repository. In this post I'll talk about git-crypt which is one way to accomplish that.

### Configuration management tools

I am a big fan of configuration management tools such as Ansible, Chef, and Pupppet. Because these tools allow the expression of infrastructure as code, their configuration and/or source files can be placed in version control, and this usually includes sensitive information like passwords (example: setting the mysql servers root password). Given that, each of these systems has their own way of encrypting sensitive files.

* Ansible has [vault](http://docs.ansible.com/playbooks_vault.html)
* Chef has [encrypted data bags](https://docs.getchef.com/essentials_data_bags.html#encrypt-a-data-bag-item)
* Puppet has [hiera-gpg](https://github.com/crayfishx/hiera-gpg)
* and there are likely more...

Each of the above has its own workflow, but usually there is a shared key of some kind and it is used to decrypt the files at runtime. That shared key has to be readable by the process running the configuration management system.

However, what I want to discuss in this blog post is [git-crypt](https://github.com/AGWA/git-crypt) which can work in any situation in which git is being used, so git-crypt could be considered, in some ways, an alternative to systems like Ansible Vault, though they are not exactly the same, and may not fit into your particular workflow.

### Using git-crypt
